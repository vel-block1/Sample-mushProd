import{s as Mt,l as it,i as K,n as ot,f,k as Bt,e as c,a as w,t as J,c as u,b as M,p as Y,g as N,d as W,q as o,h as s,r as ut,u as Q,z as Te,j as rt,x as yt,A as At,o as Ee,y as Vt,m as De,v as Me}from"../chunks/scheduler.QbWIzjUv.js";import{S as Rt,i as Lt,c as xt,a as Kt,m as Yt,b as vt,e as ke,t as bt,d as zt,g as ye,f as Re}from"../chunks/index.COTcGcuD.js";import{e as Et,u as Qt,d as Xt}from"../chunks/each.DrhyqX_I.js";import{g as Ct,p as Ft,h as kt,f as Le,e as Ce,a as re,P as Be}from"../chunks/index.DTi6dYAV.js";import{g as wt}from"../chunks/stores.GkbJHTyM.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BEtOAtSO.js";import{P as we}from"../chunks/Paginator.Cr8dbEHU.js";import{M as Ne}from"../chunks/Modal.BaEBjw_v.js";import{T as Oe}from"../chunks/Toast.CyJWZj9n.js";import{A as Ie}from"../chunks/AddHarvestedModal.CpP5gfb6.js";import{d as nt,a as Nt,u as Pt,p as qe,c as oe,b as ne,q as Se,o as Ue,t as Ve,i as Fe}from"../chunks/firebase.CXGZVSlo.js";import{b as He,a as Dt}from"../chunks/toast.D8XhVVf2.js";function ie(l){let e,t,a,r="Update Batched Fruiting Bags Remarks",b,_,v,n,y,h='<i class="fa-solid fa-calendar"></i>',d,i,R,H,g,E,S,m,p,L=l[0].buttonTextCancel+"",D,q,P,F,V;return{c(){e=c("div"),t=c("header"),a=c("div"),a.textContent=r,b=w(),_=c("hr"),v=w(),n=c("div"),y=c("div"),y.innerHTML=h,d=w(),i=c("textarea"),R=w(),H=c("footer"),g=c("button"),E=J("OK"),m=w(),p=c("button"),D=J(L),this.h()},l(B){e=u(B,"DIV",{class:!0});var T=M(e);t=u(T,"HEADER",{class:!0});var O=M(t);a=u(O,"DIV",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-nb55g8"&&(a.textContent=r),O.forEach(f),b=N(T),_=u(T,"HR",{class:!0}),v=N(T),n=u(T,"DIV",{class:!0});var k=M(n);y=u(k,"DIV",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-egrtet"&&(y.innerHTML=h),d=N(k),i=u(k,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),M(i).forEach(f),k.forEach(f),R=N(T),H=u(T,"FOOTER",{class:!0});var j=M(H);g=u(j,"BUTTON",{class:!0});var I=M(g);E=W(I,"OK"),I.forEach(f),m=N(j),p=u(j,"BUTTON",{class:!0});var U=M(p);D=W(U,L),U.forEach(f),j.forEach(f),T.forEach(f),this.h()},h(){o(a,"class","flex items-center justify-center"),o(t,"class",Ae),o(_,"class","opacity-50"),o(y,"class","input-group-shim"),o(i,"class","textarea"),o(i,"rows","3"),o(i,"placeholder","Remarks"),o(n,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),o(g,"class",S="btn "+l[0].buttonPositive),o(p,"class",q="btn "+l[0].buttonNeutral),o(H,"class",P="modal-footer "+l[0].regionFooter),o(e,"class","modal-example-form "+je)},m(B,T){K(B,e,T),s(e,t),s(t,a),s(e,b),s(e,_),s(e,v),s(e,n),s(n,y),s(n,d),s(n,i),ut(i,l[1]),s(e,R),s(e,H),s(H,g),s(g,E),s(H,m),s(H,p),s(p,D),F||(V=[Q(i,"input",l[5]),Q(g,"click",l[4]),Q(p,"click",function(){Te(l[0].onClose)&&l[0].onClose.apply(this,arguments)})],F=!0)},p(B,T){l=B,T&2&&ut(i,l[1]),T&1&&S!==(S="btn "+l[0].buttonPositive)&&o(g,"class",S),T&1&&L!==(L=l[0].buttonTextCancel+"")&&rt(D,L),T&1&&q!==(q="btn "+l[0].buttonNeutral)&&o(p,"class",q),T&1&&P!==(P="modal-footer "+l[0].regionFooter)&&o(H,"class",P)},d(B){B&&f(e),F=!1,yt(V)}}}function Pe(l){let e,t=l[2][0]&&ie(l);return{c(){t&&t.c(),e=it()},l(a){t&&t.l(a),e=it()},m(a,r){t&&t.m(a,r),K(a,e,r)},p(a,[r]){a[2][0]?t?t.p(a,r):(t=ie(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ot,o:ot,d(a){a&&f(e),t&&t.d(a)}}}const je="card p-4 w-modal shadow-xl space-y-4 ",Ae="text-2xl font-bold";function xe(l,e,t){let a,{parent:r}=e;const b=Ct();Bt(l,b,R=>t(2,a=R));const _=wt();function v(){He(_,"Bags Updated Successfully")}let n,y,h;Ft.subscribe(R=>{h=R,n=h.id,t(1,y=h.remarks)});async function d(){const R=nt(Nt,"user","123456"),H=nt(R,"batch",n);console.log(n);const g={batch_remarks:y};try{await Pt(H,g),v(),b.close()}catch{}}function i(){y=this.value,t(1,y)}return l.$$set=R=>{"parent"in R&&t(0,r=R.parent)},[r,y,a,b,d,i]}class Ke extends Rt{constructor(e){super(),Lt(this,e,xe,Pe,Mt,{parent:0})}}function ce(l){let e,t,a,r=`<i class="fa-solid fa-trash mr-2"></i>
				How many bags you want to remove?`,b,_,v,n,y,h='<i class="fa-solid fa-seedling"></i>',d,i,R,H,g,E,S,m,p,L="No",D,q,P,F=l[2]&&ue();return{c(){e=c("div"),t=c("header"),a=c("div"),a.innerHTML=r,b=w(),_=c("hr"),v=w(),n=c("div"),y=c("div"),y.innerHTML=h,d=w(),i=c("input"),R=w(),F&&F.c(),H=w(),g=c("footer"),E=c("button"),S=J("Yes"),m=w(),p=c("button"),p.textContent=L,this.h()},l(V){e=u(V,"DIV",{class:!0});var B=M(e);t=u(B,"HEADER",{class:!0});var T=M(t);a=u(T,"DIV",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-mu4dci"&&(a.innerHTML=r),T.forEach(f),b=N(B),_=u(B,"HR",{class:!0}),v=N(B),n=u(B,"DIV",{class:!0});var O=M(n);y=u(O,"DIV",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-17qp2kq"&&(y.innerHTML=h),d=N(O),i=u(O,"INPUT",{type:!0,placeholder:!0}),O.forEach(f),R=N(B),F&&F.l(B),H=N(B),g=u(B,"FOOTER",{class:!0});var k=M(g);E=u(k,"BUTTON",{class:!0});var j=M(E);S=W(j,"Yes"),j.forEach(f),m=N(k),p=u(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(p)!=="svelte-gmcjjq"&&(p.textContent=L),k.forEach(f),B.forEach(f),this.h()},h(){o(a,"class","flex items-center"),o(t,"class",Ge),o(_,"class","opacity-50"),o(y,"class","input-group-shim"),o(i,"type","number"),o(i,"placeholder","Number of Bags"),o(n,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),o(E,"class","btn variant-filled-error"),E.disabled=l[2],o(p,"class","btn variant-filled-tertiary"),o(g,"class",D="modal-footer "+l[0].regionFooter),o(e,"class","modal-example-form "+ze)},m(V,B){K(V,e,B),s(e,t),s(t,a),s(e,b),s(e,_),s(e,v),s(e,n),s(n,y),s(n,d),s(n,i),ut(i,l[1]),s(e,R),F&&F.m(e,null),s(e,H),s(e,g),s(g,E),s(E,S),s(g,m),s(g,p),q||(P=[Q(i,"input",l[9]),Q(E,"click",l[6]),Q(p,"click",l[5])],q=!0)},p(V,B){B&2&&At(i.value)!==V[1]&&ut(i,V[1]),V[2]?F||(F=ue(),F.c(),F.m(e,H)):F&&(F.d(1),F=null),B&4&&(E.disabled=V[2]),B&1&&D!==(D="modal-footer "+V[0].regionFooter)&&o(g,"class",D)},d(V){V&&f(e),F&&F.d(),q=!1,yt(P)}}}function ue(l){let e,t="Please enter a valid quantity";return{c(){e=c("p"),e.textContent=t,this.h()},l(a){e=u(a,"P",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1whknoc"&&(e.textContent=t),this.h()},h(){o(e,"class","text-red-500")},m(a,r){K(a,e,r)},d(a){a&&f(e)}}}function Ye(l){let e,t=l[3][0]&&ce(l);return{c(){t&&t.c(),e=it()},l(a){t&&t.l(a),e=it()},m(a,r){t&&t.m(a,r),K(a,e,r)},p(a,[r]){a[3][0]?t?t.p(a,r):(t=ce(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ot,o:ot,d(a){a&&f(e),t&&t.d(a)}}}const ze="card p-4 w-modal shadow-xl space-y-4 ",Ge="text-2xl font-bold";function Qe(l,e,t){let a,{parent:r}=e,{id:b}=e,{quantity:_}=e,v,n,y=!1;const h=Ct();Bt(l,h,p=>t(3,a=p));const d=wt();function i(){h.close()}function R(){Dt(d,"Bag Removed Successfully")}function H(){Dt(d,"Failed to Remove Bags")}function g(){Dt(d,"Error Value")}let E;Ft.subscribe(p=>{E=p,t(7,b=E.id),v=E.removed,t(8,_=E.quantity)});async function S(){const p=nt(Nt,"user","123456"),L=nt(p,"batch",b);if(typeof _!="number"||isNaN(_))return;if(isNaN(n)){g();return}const D=Math.max(0,_-n),q=Math.max(0,v+n),P={batch_total_bags:D},F={batch_total_removed:q};try{await Pt(L,F),await Pt(L,P),h.close(),R()}catch{H()}}function m(){n=At(this.value),t(1,n)}return l.$$set=p=>{"parent"in p&&t(0,r=p.parent),"id"in p&&t(7,b=p.id),"quantity"in p&&t(8,_=p.quantity)},l.$$.update=()=>{l.$$.dirty&2&&t(2,y=isNaN(Number(n))||n<0)},[r,n,y,a,h,i,S,b,_,m]}class Xe extends Rt{constructor(e){super(),Lt(this,e,Qe,Ye,Mt,{parent:0,id:7,quantity:8})}}function de(l){let e,t,a,r=`<i class="fa-solid fa-pen-to-square mr-2"></i>
				Update Harvested Mushrooms`,b,_,v,n,y,h='<i class="fa-solid fa-calendar"></i>',d,i,R,H,g,E,S='<i class="fa-solid fa-seedling"></i>',m,p,L,D,q,P='<i class="fa-solid fa-calendar"></i>',F,V,B,T,O,k,j,I,U,G=l[0].buttonTextCancel+"",X,Z,tt,et,ct;return{c(){e=c("div"),t=c("header"),a=c("div"),a.innerHTML=r,b=w(),_=c("hr"),v=w(),n=c("div"),y=c("div"),y.innerHTML=h,d=w(),i=c("p"),R=J(l[1]),H=w(),g=c("div"),E=c("div"),E.innerHTML=S,m=w(),p=c("input"),L=w(),D=c("div"),q=c("div"),q.innerHTML=P,F=w(),V=c("textarea"),B=w(),T=c("footer"),O=c("button"),k=J("OK"),I=w(),U=c("button"),X=J(G),this.h()},l($){e=u($,"DIV",{class:!0});var A=M(e);t=u(A,"HEADER",{class:!0});var ft=M(t);a=u(ft,"DIV",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-oukzgg"&&(a.innerHTML=r),ft.forEach(f),b=N(A),_=u(A,"HR",{class:!0}),v=N(A),n=u(A,"DIV",{class:!0});var ht=M(n);y=u(ht,"DIV",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-egrtet"&&(y.innerHTML=h),d=N(ht),i=u(ht,"P",{class:!0});var dt=M(i);R=W(dt,l[1]),dt.forEach(f),ht.forEach(f),H=N(A),g=u(A,"DIV",{class:!0});var lt=M(g);E=u(lt,"DIV",{class:!0,"data-svelte-h":!0}),Y(E)!=="svelte-17qp2kq"&&(E.innerHTML=S),m=N(lt),p=u(lt,"INPUT",{type:!0,placeholder:!0}),lt.forEach(f),L=N(A),D=u(A,"DIV",{class:!0});var gt=M(D);q=u(gt,"DIV",{class:!0,"data-svelte-h":!0}),Y(q)!=="svelte-egrtet"&&(q.innerHTML=P),F=N(gt),V=u(gt,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),M(V).forEach(f),gt.forEach(f),B=N(A),T=u(A,"FOOTER",{class:!0});var mt=M(T);O=u(mt,"BUTTON",{class:!0});var at=M(O);k=W(at,"OK"),at.forEach(f),I=N(mt),U=u(mt,"BUTTON",{class:!0});var st=M(U);X=W(st,G),st.forEach(f),mt.forEach(f),A.forEach(f),this.h()},h(){o(a,"class","flex items-center justify-center"),o(t,"class",Ze),o(_,"class","opacity-50"),o(y,"class","input-group-shim"),o(i,"class","p-2"),o(n,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),o(E,"class","input-group-shim"),o(p,"type","number"),o(p,"placeholder","Grams"),o(g,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),o(q,"class","input-group-shim"),o(V,"class","textarea"),o(V,"rows","3"),o(V,"placeholder","Remarks"),o(D,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),o(O,"class",j="btn "+l[0].buttonPositive),o(U,"class",Z="btn "+l[0].buttonNeutral),o(T,"class",tt="modal-footer "+l[0].regionFooter),o(e,"class","modal-example-form "+We)},m($,A){K($,e,A),s(e,t),s(t,a),s(e,b),s(e,_),s(e,v),s(e,n),s(n,y),s(n,d),s(n,i),s(i,R),s(e,H),s(e,g),s(g,E),s(g,m),s(g,p),ut(p,l[2]),s(e,L),s(e,D),s(D,q),s(D,F),s(D,V),ut(V,l[3]),s(e,B),s(e,T),s(T,O),s(O,k),s(T,I),s(T,U),s(U,X),et||(ct=[Q(p,"input",l[7]),Q(V,"input",l[8]),Q(O,"click",l[6]),Q(U,"click",function(){Te(l[0].onClose)&&l[0].onClose.apply(this,arguments)})],et=!0)},p($,A){l=$,A&2&&rt(R,l[1]),A&4&&At(p.value)!==l[2]&&ut(p,l[2]),A&8&&ut(V,l[3]),A&1&&j!==(j="btn "+l[0].buttonPositive)&&o(O,"class",j),A&1&&G!==(G=l[0].buttonTextCancel+"")&&rt(X,G),A&1&&Z!==(Z="btn "+l[0].buttonNeutral)&&o(U,"class",Z),A&1&&tt!==(tt="modal-footer "+l[0].regionFooter)&&o(T,"class",tt)},d($){$&&f(e),et=!1,yt(ct)}}}function Je(l){let e,t=l[4][0]&&de(l);return{c(){t&&t.c(),e=it()},l(a){t&&t.l(a),e=it()},m(a,r){t&&t.m(a,r),K(a,e,r)},p(a,[r]){a[4][0]?t?t.p(a,r):(t=de(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ot,o:ot,d(a){a&&f(e),t&&t.d(a)}}}const We="card p-4 w-modal shadow-xl space-y-4 ",Ze="text-2xl font-bold";function $e(l,e,t){let a,{parent:r}=e;const b=Ct();Bt(l,b,m=>t(4,a=m));const _=wt();function v(){He(_,"Harvested Data Updated Successfully")}function n(m){Dt(_,`Failed to Updated  Harvested Data ${m}`)}let y,h,d,i,R,H;kt.subscribe(m=>{H=m,R=H.batch_id,h=H.id,t(1,y=H.date),t(2,d=H.grams),t(3,i=H.remarks)});async function g(){const m=nt(Nt,"user","123456"),p=nt(m,"batch",R,"batch_harvest",h),L={grams:d,remarks:i};try{await Pt(p,L),b.close(),v()}catch(D){n(D)}}function E(){d=At(this.value),t(2,d)}function S(){i=this.value,t(3,i)}return l.$$set=m=>{"parent"in m&&t(0,r=m.parent)},[r,y,d,i,a,b,g,E,S]}class ta extends Rt{constructor(e){super(),Lt(this,e,$e,Je,Mt,{parent:0})}}function fe(l){let e,t,a,r=`<i class="fa-solid fa-trash mr-2"></i>
				Please Confirm to Remove`,b,_,v,n,y="<h1>Are you sure you want to remove the recorded harvested mushrooms?</h1>",h,d,i,R="Yes",H,g,E="No",S,m,p;return{c(){e=c("div"),t=c("header"),a=c("div"),a.innerHTML=r,b=w(),_=c("hr"),v=w(),n=c("div"),n.innerHTML=y,h=w(),d=c("footer"),i=c("button"),i.textContent=R,H=w(),g=c("button"),g.textContent=E,this.h()},l(L){e=u(L,"DIV",{class:!0});var D=M(e);t=u(D,"HEADER",{class:!0});var q=M(t);a=u(q,"DIV",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-a1tfkk"&&(a.innerHTML=r),q.forEach(f),b=N(D),_=u(D,"HR",{class:!0}),v=N(D),n=u(D,"DIV",{"data-svelte-h":!0}),Y(n)!=="svelte-17qv3qn"&&(n.innerHTML=y),h=N(D),d=u(D,"FOOTER",{class:!0});var P=M(d);i=u(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(i)!=="svelte-rreyl5"&&(i.textContent=R),H=N(P),g=u(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(g)!=="svelte-gmcjjq"&&(g.textContent=E),P.forEach(f),D.forEach(f),this.h()},h(){o(a,"class","flex items-center"),o(t,"class",sa),o(_,"class","opacity-50"),o(i,"class","btn variant-filled-error"),o(g,"class","btn variant-filled-tertiary"),o(d,"class",S="modal-footer "+l[0].regionFooter),o(e,"class","modal-example-form "+aa)},m(L,D){K(L,e,D),s(e,t),s(t,a),s(e,b),s(e,_),s(e,v),s(e,n),s(e,h),s(e,d),s(d,i),s(d,H),s(d,g),m||(p=[Q(i,"click",l[4]),Q(g,"click",l[3])],m=!0)},p(L,D){D&1&&S!==(S="modal-footer "+L[0].regionFooter)&&o(d,"class",S)},d(L){L&&f(e),m=!1,yt(p)}}}function ea(l){let e,t=l[1][0]&&fe(l);return{c(){t&&t.c(),e=it()},l(a){t&&t.l(a),e=it()},m(a,r){t&&t.m(a,r),K(a,e,r)},p(a,[r]){a[1][0]?t?t.p(a,r):(t=fe(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ot,o:ot,d(a){a&&f(e),t&&t.d(a)}}}const aa="card p-4 w-modal shadow-xl space-y-4 ",sa="text-2xl font-bold";function la(l,e,t){let a,{parent:r}=e;const b=Ct();Bt(l,b,H=>t(1,a=H));const _=wt();function v(){b.close()}function n(){Dt(_,"Harvested Data Removed Successfully")}function y(H){Dt(_,`Failed to Remove Harvest Data ${H}`)}let h,d,i;kt.subscribe(H=>{i=H,d=i.batch_id,h=i.id,i.date_harvested,i.grams,i.remarks});async function R(){const H=nt(Nt,"user","123456"),g=nt(H,"batch",d,"batch_harvest",h);try{await qe(g),b.close(),n()}catch(E){y(E)}}return l.$$set=H=>{"parent"in H&&t(0,r=H.parent)},[r,a,b,v,R]}class ra extends Rt{constructor(e){super(),Lt(this,e,la,ea,Mt,{parent:0})}}function he(l){let e,t,a,r=`<i class="fa-solid fa-clipboard mr-2"></i>
				Record`,b,_,v,n,y,h,d,i,R,H,g,E,S,m,p,L,D,q,P,F,V,B,T,O,k,j;return{c(){e=c("div"),t=c("header"),a=c("div"),a.innerHTML=r,b=w(),_=c("hr"),v=w(),n=c("div"),y=c("h1"),h=c("strong"),d=c("i"),i=w(),R=J(l[0]),H=w(),g=c("h1"),E=J("Grams Harvested: "),S=c("strong"),m=J(l[1]),p=J(" grams"),L=w(),D=c("blockquote"),q=J(l[2]),P=w(),F=c("footer"),V=c("button"),B=J("OK"),this.h()},l(I){e=u(I,"DIV",{class:!0});var U=M(e);t=u(U,"HEADER",{class:!0});var G=M(t);a=u(G,"DIV",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-1ryexyg"&&(a.innerHTML=r),G.forEach(f),b=N(U),_=u(U,"HR",{class:!0}),v=N(U),n=u(U,"DIV",{class:!0});var X=M(n);y=u(X,"H1",{class:!0});var Z=M(y);h=u(Z,"STRONG",{});var tt=M(h);d=u(tt,"I",{class:!0}),M(d).forEach(f),i=N(tt),R=W(tt,l[0]),tt.forEach(f),Z.forEach(f),X.forEach(f),H=N(U),g=u(U,"H1",{class:!0});var et=M(g);E=W(et,"Grams Harvested: "),S=u(et,"STRONG",{});var ct=M(S);m=W(ct,l[1]),p=W(ct," grams"),ct.forEach(f),et.forEach(f),L=N(U),D=u(U,"BLOCKQUOTE",{class:!0});var $=M(D);q=W($,l[2]),$.forEach(f),P=N(U),F=u(U,"FOOTER",{class:!0});var A=M(F);V=u(A,"BUTTON",{class:!0});var ft=M(V);B=W(ft,"OK"),ft.forEach(f),A.forEach(f),U.forEach(f),this.h()},h(){o(a,"class","flex items-center justify-center"),o(t,"class",ia),o(_,"class","opacity-50"),o(d,"class","fa-solid fa-calendar-days mr-1"),o(y,"class","text-lg"),o(n,"class","flex justify-between items-center"),o(g,"class","text-1xl md:text-1xl lg:text-1xl"),o(D,"class","blockquote"),o(V,"class",T="btn "+l[3].buttonPositive),o(F,"class",O="modal-footer "+l[3].regionFooter),o(e,"class","modal-example-form "+na)},m(I,U){K(I,e,U),s(e,t),s(t,a),s(e,b),s(e,_),s(e,v),s(e,n),s(n,y),s(y,h),s(h,d),s(h,i),s(h,R),s(e,H),s(e,g),s(g,E),s(g,S),s(S,m),s(S,p),s(e,L),s(e,D),s(D,q),s(e,P),s(e,F),s(F,V),s(V,B),k||(j=Q(V,"click",l[6]),k=!0)},p(I,U){U&1&&rt(R,I[0]),U&2&&rt(m,I[1]),U&4&&rt(q,I[2]),U&8&&T!==(T="btn "+I[3].buttonPositive)&&o(V,"class",T),U&8&&O!==(O="modal-footer "+I[3].regionFooter)&&o(F,"class",O)},d(I){I&&f(e),k=!1,j()}}}function oa(l){let e,t=l[4][0]&&he(l);return{c(){t&&t.c(),e=it()},l(a){t&&t.l(a),e=it()},m(a,r){t&&t.m(a,r),K(a,e,r)},p(a,[r]){a[4][0]?t?t.p(a,r):(t=he(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ot,o:ot,d(a){a&&f(e),t&&t.d(a)}}}const na="card p-4 w-modal shadow-xl space-y-4",ia="text-2xl font-bold";function ca(l,e,t){let a,{parent:r}=e,{date:b}=e,{id:_}=e,{grams:v}=e,{remarks:n}=e;const y=Ct();Bt(l,y,i=>t(4,a=i));function h(){y.close()}let d;return kt.subscribe(i=>{d=i,t(7,_=d.id),t(0,b=d.date),t(1,v=d.grams),t(2,n=d.remarks)}),l.$$set=i=>{"parent"in i&&t(3,r=i.parent),"date"in i&&t(0,b=i.date),"id"in i&&t(7,_=i.id),"grams"in i&&t(1,v=i.grams),"remarks"in i&&t(2,n=i.remarks)},[b,v,n,r,a,y,h,_]}class ua extends Rt{constructor(e){super(),Lt(this,e,ca,oa,Mt,{parent:3,date:0,id:7,grams:1,remarks:2})}}function me(l,e,t){const a=l.slice();return a[36]=e[t],a}function _e(l,e,t){const a=l.slice();return a[36]=e[t],a}function pe(l,e,t){const a=l.slice();return a[36]=e[t],a}function da(l){let e,t,a,r,b='<a href="/records/batch" class="btn-icon btn-icon-sm variant-filled m-2"><i class="fa-solid fa-arrow-left"></i></a>',_,v=[],n=new Map,y,h,d,i='<tr><th><i class="fa-solid fa-calendar-days mr-2"></i>Date</th> <th><i class="fa-solid fa-bag-shopping mr-2"></i>Number of Bags</th> <th><i class="fa-solid fa-circle-xmark mr-2"></i>Number of Bags Removed</th> <th><i class="fa-solid fa-pen-to-square mr-2"></i>Remarks</th></tr>',R,H,g,E=[],S=new Map,m,p,L,D,q,P,F='<i class="fa-solid fa-jar-wheat fa-md m-2"></i>Harvest Record',V,B,T,O,k='<i class="fa-solid fa-search"></i> <span>Search</span>',j,I,U,G,X,Z='<i class="fa-solid fa-calendar-days mr-2"></i>Date',tt,et,ct='<i class="fa-solid fa-layer-group mr-2"></i>Grams Harvested',$,A,ft='<i class="fa-solid fa-pen-to-square mr-2"></i>Remarks',ht,dt,lt,gt='<i class="fa-solid fa-plus"></i> <span>Add</span>',mt,at,st,Ot,Gt,Jt;e=new Oe({});let It=Et(l[1]);const Wt=C=>C[36].id;for(let C=0;C<It.length;C+=1){let x=pe(l,It,C),z=Wt(x);n.set(z,v[C]=ve(z,x))}let qt=Et(l[1]);const Zt=C=>C[36].id;for(let C=0;C<qt.length;C+=1){let x=_e(l,qt,C),z=Zt(x);S.set(z,E[C]=be(z,x))}const $t=[ma,ha],_t=[];function te(C,x){return C[5]?0:1}return at=te(l),st=_t[at]=$t[at](l),{c(){xt(e.$$.fragment),t=w(),a=c("div"),r=c("div"),r.innerHTML=b,_=w();for(let C=0;C<v.length;C+=1)v[C].c();y=w(),h=c("table"),d=c("thead"),d.innerHTML=i,R=w(),H=c("tbody"),g=c("tr");for(let C=0;C<E.length;C+=1)E[C].c();m=w(),p=c("hr"),L=w(),D=c("div"),q=c("div"),P=c("div"),P.innerHTML=F,V=w(),B=c("input"),T=w(),O=c("button"),O.innerHTML=k,j=w(),I=c("table"),U=c("thead"),G=c("tr"),X=c("th"),X.innerHTML=Z,tt=w(),et=c("th"),et.innerHTML=ct,$=w(),A=c("th"),A.innerHTML=ft,ht=w(),dt=c("th"),lt=c("button"),lt.innerHTML=gt,mt=w(),st.c(),this.h()},l(C){Kt(e.$$.fragment,C),t=N(C),a=u(C,"DIV",{class:!0});var x=M(a);r=u(x,"DIV",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-89xfn4"&&(r.innerHTML=b),_=N(x);for(let Tt=0;Tt<v.length;Tt+=1)v[Tt].l(x);y=N(x),h=u(x,"TABLE",{class:!0});var z=M(h);d=u(z,"THEAD",{"data-svelte-h":!0}),Y(d)!=="svelte-1ses0b1"&&(d.innerHTML=i),R=N(z),H=u(z,"TBODY",{});var ee=M(H);g=u(ee,"TR",{class:!0});var ae=M(g);for(let Tt=0;Tt<E.length;Tt+=1)E[Tt].l(ae);ae.forEach(f),ee.forEach(f),z.forEach(f),x.forEach(f),m=N(C),p=u(C,"HR",{class:!0}),L=N(C),D=u(C,"DIV",{class:!0});var St=M(D);q=u(St,"DIV",{class:!0});var Ht=M(q);P=u(Ht,"DIV",{class:!0,"data-svelte-h":!0}),Y(P)!=="svelte-h6sq9j"&&(P.innerHTML=F),V=N(Ht),B=u(Ht,"INPUT",{type:!0,placeholder:!0,class:!0}),T=N(Ht),O=u(Ht,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(O)!=="svelte-1dwgxnj"&&(O.innerHTML=k),Ht.forEach(f),j=N(St),I=u(St,"TABLE",{class:!0});var Ut=M(I);U=u(Ut,"THEAD",{});var se=M(U);G=u(se,"TR",{});var pt=M(G);X=u(pt,"TH",{"data-svelte-h":!0}),Y(X)!=="svelte-1cyq8fs"&&(X.innerHTML=Z),tt=N(pt),et=u(pt,"TH",{"data-svelte-h":!0}),Y(et)!=="svelte-1mvz4nf"&&(et.innerHTML=ct),$=N(pt),A=u(pt,"TH",{"data-svelte-h":!0}),Y(A)!=="svelte-srhm62"&&(A.innerHTML=ft),ht=N(pt),dt=u(pt,"TH",{class:!0});var le=M(dt);lt=u(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(lt)!=="svelte-18tfcni"&&(lt.innerHTML=gt),le.forEach(f),pt.forEach(f),se.forEach(f),mt=N(Ut),st.l(Ut),Ut.forEach(f),St.forEach(f),this.h()},h(){o(r,"class","flex"),o(g,"class",""),o(h,"class","table table-hover"),o(a,"class","m-5"),o(p,"class","opacity-50"),o(P,"class","text-2xl"),o(B,"type","text"),o(B,"placeholder","Search..."),o(B,"class","input mb-2 mr-2 sm:w-36 ml-auto h-8"),o(O,"type","button"),o(O,"class","btn btn-sm variant-filled-tertiary h-8 mb-2"),o(q,"class","flex items-center justify-center"),o(lt,"type","button"),o(lt,"class","btn btn-sm variant-filled-primary mr-2"),o(dt,"class","flex items-center justify-center"),o(I,"class","table table-hover"),o(D,"class","m-5")},m(C,x){Yt(e,C,x),K(C,t,x),K(C,a,x),s(a,r),s(a,_);for(let z=0;z<v.length;z+=1)v[z]&&v[z].m(a,null);s(a,y),s(a,h),s(h,d),s(h,R),s(h,H),s(H,g);for(let z=0;z<E.length;z+=1)E[z]&&E[z].m(g,null);K(C,m,x),K(C,p,x),K(C,L,x),K(C,D,x),s(D,q),s(q,P),s(q,V),s(q,B),ut(B,l[3]),s(q,T),s(q,O),s(D,j),s(D,I),s(I,U),s(U,G),s(G,X),s(G,tt),s(G,et),s(G,$),s(G,A),s(G,ht),s(G,dt),s(dt,lt),s(I,mt),_t[at].m(I,null),Ot=!0,Gt||(Jt=[Q(B,"input",l[17]),Q(O,"click",l[13]),Q(lt,"click",l[18])],Gt=!0)},p(C,x){x[0]&2&&(It=Et(C[1]),v=Qt(v,x,Wt,1,C,It,n,a,Xt,ve,y,pe)),x[0]&6146&&(qt=Et(C[1]),E=Qt(E,x,Zt,1,C,qt,S,g,Xt,be,null,_e)),x[0]&8&&B.value!==C[3]&&ut(B,C[3]);let z=at;at=te(C),at===z?_t[at].p(C,x):(ye(),vt(_t[z],1,1,()=>{_t[z]=null}),ke(),st=_t[at],st?st.p(C,x):(st=_t[at]=$t[at](C),st.c()),bt(st,1),st.m(I,null))},i(C){Ot||(bt(e.$$.fragment,C),bt(st),Ot=!0)},o(C){vt(e.$$.fragment,C),vt(st),Ot=!1},d(C){C&&(f(t),f(a),f(m),f(p),f(L),f(D)),zt(e,C);for(let x=0;x<v.length;x+=1)v[x].d();for(let x=0;x<E.length;x+=1)E[x].d();_t[at].d(),Gt=!1,yt(Jt)}}}function fa(l){let e,t,a;return t=new Be({props:{value:void 0}}),{c(){e=c("div"),xt(t.$$.fragment),this.h()},l(r){e=u(r,"DIV",{class:!0});var b=M(e);Kt(t.$$.fragment,b),b.forEach(f),this.h()},h(){o(e,"class","flex justify-center items-center h-fit")},m(r,b){K(r,e,b),Yt(t,e,null),a=!0},p:ot,i(r){a||(bt(t.$$.fragment,r),a=!0)},o(r){vt(t.$$.fragment,r),a=!1},d(r){r&&f(e),zt(t)}}}function ve(l,e){let t,a,r=e[36].batch_code+"",b;return{key:l,first:null,c(){t=c("div"),a=c("i"),b=J(r),this.h()},l(_){t=u(_,"DIV",{class:!0});var v=M(t);a=u(v,"I",{class:!0}),M(a).forEach(f),b=W(v,r),v.forEach(f),this.h()},h(){o(a,"class","fa-solid fa-qrcode m-2"),o(t,"class","text-2xl"),this.first=t},m(_,v){K(_,t,v),s(t,a),s(t,b)},p(_,v){e=_,v[0]&2&&r!==(r=e[36].batch_code+"")&&rt(b,r)},d(_){_&&f(t)}}}function be(l,e){let t,a=e[36].date+"",r,b,_,v=e[36].batch_total_bags+"",n,y,h,d='<i class="fa-solid fa-trash"></i>',i,R,H=e[36].batch_total_removed+"",g,E,S,m=jt(e[36].batch_remarks)+"",p,L,D,q='<i class="fa-solid fa-pen-to-square"></i> ',P,F;function V(){return e[15](e[36])}function B(){return e[16](e[36])}return{key:l,first:null,c(){t=c("td"),r=J(a),b=w(),_=c("td"),n=J(v),y=w(),h=c("button"),h.innerHTML=d,i=w(),R=c("td"),g=J(H),E=w(),S=c("td"),p=J(m),L=w(),D=c("button"),D.innerHTML=q,this.h()},l(T){t=u(T,"TD",{});var O=M(t);r=W(O,a),O.forEach(f),b=N(T),_=u(T,"TD",{class:!0});var k=M(_);n=W(k,v),y=N(k),h=u(k,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(h)!=="svelte-1oa5h0g"&&(h.innerHTML=d),k.forEach(f),i=N(T),R=u(T,"TD",{});var j=M(R);g=W(j,H),j.forEach(f),E=N(T),S=u(T,"TD",{class:!0});var I=M(S);p=W(I,m),L=N(I),D=u(I,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(D)!=="svelte-1asujl6"&&(D.innerHTML=q),I.forEach(f),this.h()},h(){o(h,"type","button"),o(h,"class","btn btn-sm variant-filled-error"),o(_,"class","flex items-center justify-between"),o(D,"type","button"),o(D,"class","btn btn-sm variant-filled-tertiary ml-2"),o(S,"class","flex items-center justify-between"),this.first=t},m(T,O){K(T,t,O),s(t,r),K(T,b,O),K(T,_,O),s(_,n),s(_,y),s(_,h),K(T,i,O),K(T,R,O),s(R,g),K(T,E,O),K(T,S,O),s(S,p),s(S,L),s(S,D),P||(F=[Q(h,"click",Vt(V)),Q(D,"click",Vt(B))],P=!0)},p(T,O){e=T,O[0]&2&&a!==(a=e[36].date+"")&&rt(r,a),O[0]&2&&v!==(v=e[36].batch_total_bags+"")&&rt(n,v),O[0]&2&&H!==(H=e[36].batch_total_removed+"")&&rt(g,H),O[0]&2&&m!==(m=jt(e[36].batch_remarks)+"")&&rt(p,m)},d(T){T&&(f(t),f(b),f(_),f(i),f(R),f(E),f(S)),P=!1,yt(F)}}}function ha(l){let e,t='<h1 class="h4 m-2">No Harvest Yet!</h1>';return{c(){e=c("tbody"),e.innerHTML=t,this.h()},l(a){e=u(a,"TBODY",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1hvqizp"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex justify-center items-center")},m(a,r){K(a,e,r)},p:ot,i:ot,o:ot,d(a){a&&f(e)}}}function ma(l){let e,t=[],a=new Map,r,b,_,v,n,y='Total Bags Planted: <span class="text-2xl"></span>',h,d,i,R,H=Et(l[6]);const g=m=>m[36].id;for(let m=0;m<H.length;m+=1){let p=me(l,H,m),L=g(p);a.set(L,t[m]=ge(L,p))}function E(m){l[22](m)}let S={showFirstLastButtons:!1,showPreviousNextButtons:!0};return l[0]!==void 0&&(S.settings=l[0]),d=new we({props:S}),De.push(()=>Re(d,"settings",E)),{c(){e=c("tbody");for(let m=0;m<t.length;m+=1)t[m].c();r=w(),b=c("tfoot"),_=c("tr"),v=c("th"),n=c("h1"),n.innerHTML=y,h=w(),xt(d.$$.fragment),this.h()},l(m){e=u(m,"TBODY",{});var p=M(e);for(let P=0;P<t.length;P+=1)t[P].l(p);p.forEach(f),r=N(m),b=u(m,"TFOOT",{});var L=M(b);_=u(L,"TR",{});var D=M(_);v=u(D,"TH",{colspan:!0});var q=M(v);n=u(q,"H1",{class:!0,"data-svelte-h":!0}),Y(n)!=="svelte-qcyym9"&&(n.innerHTML=y),h=N(q),Kt(d.$$.fragment,q),q.forEach(f),D.forEach(f),L.forEach(f),this.h()},h(){o(n,"class","mb-2"),o(v,"colspan","3")},m(m,p){K(m,e,p);for(let L=0;L<t.length;L+=1)t[L]&&t[L].m(e,null);K(m,r,p),K(m,b,p),s(b,_),s(_,v),s(v,n),s(v,h),Yt(d,v,null),R=!0},p(m,p){p[0]&1728&&(H=Et(m[6]),t=Qt(t,p,g,1,m,H,a,e,Xt,ge,null,me));const L={};!i&&p[0]&1&&(i=!0,L.settings=m[0],Me(()=>i=!1)),d.$set(L)},i(m){R||(bt(d.$$.fragment,m),R=!0)},o(m){vt(d.$$.fragment,m),R=!1},d(m){m&&(f(e),f(r),f(b));for(let p=0;p<t.length;p+=1)t[p].d();zt(d)}}}function ge(l,e){let t,a,r=e[36].date+"",b,_,v,n=e[36].grams+"",y,h,d,i=jt(e[36].remarks)+"",R,H,g,E,S='<i class="fa-solid fa-pen-to-square"></i> <span>Update</span> ',m,p='<i class="fa-solid fa-trash"></i> <span>Remove</span>',L,D,q;function P(){return e[19](e[36])}function F(){return e[20](e[36])}function V(){return e[21](e[36])}return{key:l,first:null,c(){t=c("tr"),a=c("td"),b=J(r),_=w(),v=c("td"),y=J(n),h=w(),d=c("td"),R=J(i),H=w(),g=c("td"),E=c("button"),E.innerHTML=S,m=c("button"),m.innerHTML=p,L=w(),this.h()},l(B){t=u(B,"TR",{class:!0});var T=M(t);a=u(T,"TD",{});var O=M(a);b=W(O,r),O.forEach(f),_=N(T),v=u(T,"TD",{});var k=M(v);y=W(k,n),k.forEach(f),h=N(T),d=u(T,"TD",{});var j=M(d);R=W(j,i),j.forEach(f),H=N(T),g=u(T,"TD",{class:!0});var I=M(g);E=u(I,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(E)!=="svelte-1pnwuu0"&&(E.innerHTML=S),m=u(I,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(m)!=="svelte-22asyh"&&(m.innerHTML=p),I.forEach(f),L=N(T),T.forEach(f),this.h()},h(){o(E,"type","button"),o(E,"class","btn btn-sm variant-filled-tertiary mr-2"),o(m,"type","button"),o(m,"class","btn btn-sm variant-filled-error"),o(g,"class","flex items-center justify-center"),o(t,"class",""),this.first=t},m(B,T){K(B,t,T),s(t,a),s(a,b),s(t,_),s(t,v),s(v,y),s(t,h),s(t,d),s(d,R),s(t,H),s(t,g),s(g,E),s(g,m),s(t,L),D||(q=[Q(E,"click",Vt(P)),Q(m,"click",Vt(F)),Q(t,"click",V)],D=!0)},p(B,T){e=B,T[0]&64&&r!==(r=e[36].date+"")&&rt(b,r),T[0]&64&&n!==(n=e[36].grams+"")&&rt(y,n),T[0]&64&&i!==(i=jt(e[36].remarks)+"")&&rt(R,i)},d(B){B&&f(t),D=!1,yt(q)}}}function _a(l){let e,t,a,r,b,_;e=new Ne({props:{transitionIn:Le,transitionInParams:{duration:200}}});const v=[fa,da],n=[];function y(h,d){return h[2]?0:1}return a=y(l),r=n[a]=v[a](l),{c(){xt(e.$$.fragment),t=w(),r.c(),b=it()},l(h){Kt(e.$$.fragment,h),t=N(h),r.l(h),b=it()},m(h,d){Yt(e,h,d),K(h,t,d),n[a].m(h,d),K(h,b,d),_=!0},p(h,d){let i=a;a=y(h),a===i?n[a].p(h,d):(ye(),vt(n[i],1,1,()=>{n[i]=null}),ke(),r=n[a],r?r.p(h,d):(r=n[a]=v[a](h),r.c()),bt(r,1),r.m(b.parentNode,b))},i(h){_||(bt(e.$$.fragment,h),bt(r),_=!0)},o(h){vt(e.$$.fragment,h),vt(r),_=!1},d(h){h&&(f(t),f(b)),zt(e,h),n[a].d(h)}}}function jt(l,e=22){return l.length>e?`${l.slice(0,e)}...`:l}function pa(l,e,t){let a,r=[],b=[],_=!0,v="",n,y;Ce.subscribe(k=>{t(4,n=k.id)}),wt();const h=nt(Nt,"user","123456");Ee(async()=>{const k=nt(h,"batch",n),j=oe(k,"batch_harvest");t(5,y=await(async()=>{try{return(await Ve(k)).exists()?!(await Fe(j)).empty:!1}catch(U){return console.error("Error checking batch_harvest existence:",U),!1}})());try{const U=nt(h,"batch",n),G=ne(U,X=>{if(X.exists()){const Z=X.data();Z.batch_planted&&Z.batch_planted.toDate&&(Z.date=re(Z.batch_planted.toDate(),"MMMM dd, yyyy")),Z.id=X.id,t(1,b=[Z])}});if(y){const X=nt(h,"batch",n),Z=oe(X,"batch_harvest"),tt=Se(Z,Ue("date","asc")),et=ne(tt,ct=>{t(14,r.length=0,r),t(14,r=[]),ct.forEach($=>{const A=$.data();A.date&&A.date.toDate&&(A.date=re(A.date.toDate(),"MMMM dd, yyyy")),A.id=$.id,r.push(A),t(2,_=!1)})})}else t(2,_=!1)}catch{}});let d={page:0,limit:5,size:r.length,amounts:[1,2,5,10]};const i=Ct();function R(k){const j={ref:ua};kt.set({batch_id:n,id:k.id,date:k.date,grams:k.grams,remarks:k.remarks});const I={type:"component",component:j,title:"",body:""};i.trigger(I)}function H(k){const j={ref:Ie};kt.set({batch_id:n,id:k.id,date:k.date,grams:k.grams,remarks:k.remarks});const I={type:"component",component:j,title:"",body:""};i.trigger(I)}function g(k){const j={ref:ta};kt.set({batch_id:n,id:k.id,date:k.date,grams:k.grams,remarks:k.remarks});const I={type:"component",component:j,title:"",body:""};i.trigger(I)}function E(k){const j={ref:ra};kt.set({batch_id:n,id:k.id,date:k.date,grams:k.grams,remarks:k.remarks});const I={type:"component",component:j,title:"",body:""};i.trigger(I)}function S(k){const j={ref:Xe};Ft.set({id:n,date:"",quantity:k.batch_total_bags,removed:k.batch_total_removed,remarks:""});const I={type:"component",component:j,title:"",body:""};i.trigger(I)}function m(k){const j={ref:Ke};Ft.set({id:n,date:"",quantity:k.batch_total_bags,removed:k.batch_total_removed,remarks:k.batch_remarks});const I={type:"component",component:j,title:"",body:""};i.trigger(I)}function p(k){return v.toLowerCase().split(" ").every(I=>Object.values(k).some(U=>typeof U=="string"&&U.toLowerCase().includes(I)))}function L(){t(6,a=r.filter(k=>p(k)).slice(d.page*d.limit,d.page*d.limit+d.limit))}const D=k=>{S(k)},q=k=>{m(k)};function P(){v=this.value,t(3,v)}const F=()=>H(n),V=k=>{g(k)},B=k=>{E(k)},T=k=>R(k);function O(k){d=k,t(0,d),t(14,r)}return l.$$.update=()=>{l.$$.dirty[0]&16384&&t(0,d.size=r.length,d),l.$$.dirty[0]&16385&&t(6,a=r.slice(d.page*d.limit,d.page*d.limit+d.limit))},[d,b,_,v,n,y,a,R,H,g,E,S,m,L,r,D,q,P,F,V,B,T,O]}class Ca extends Rt{constructor(e){super(),Lt(this,e,pa,_a,Mt,{},null,[-1,-1])}}export{Ca as component};
