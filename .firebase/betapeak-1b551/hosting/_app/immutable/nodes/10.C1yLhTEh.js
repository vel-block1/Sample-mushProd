import{s as Jt,a as R,l as jt,g as B,i as V,f as c,o as Kt,m as Wt,e as u,t as st,c as d,b as k,p as at,d as rt,q as v,h as o,r as qt,u as ot,v as Xt,w as Zt,x as Vt,n as ft,j as yt,y as At}from"../chunks/scheduler.QbWIzjUv.js";import{S as xt,i as te,c as ut,a as dt,m as _t,b as Y,e as zt,t as J,d as ht,g as Ft,f as ee}from"../chunks/index.COTcGcuD.js";import{e as bt,u as ae,d as se}from"../chunks/each.DrhyqX_I.js";import{f as re,g as le,P as Qt,a as ne}from"../chunks/index.DTi6dYAV.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BEtOAtSO.js";import{P as oe}from"../chunks/Paginator.Cr8dbEHU.js";import{M as ie}from"../chunks/Modal.BaEBjw_v.js";import{T as ce}from"../chunks/Toast.CyJWZj9n.js";import{A as fe}from"../chunks/AddHarvestedModal.CpP5gfb6.js";import{d as ue,a as de,c as _e,q as he,o as me,b as pe}from"../chunks/firebase.CXGZVSlo.js";import{a as ve}from"../chunks/allRecord.dAqQVPQj.js";function Nt(i,e,t){const s=i.slice();return s[18]=e[t],s}function Ot(i,e,t){const s=i.slice();return s[21]=e[t],s}function ge(i){let e,t,s,a,l,E,h,T='<i class="fa-solid fa-search"></i> <span>Search</span>',f,n,p,m,P,G='<i class="fa-solid fa-calendar-days mr-2"></i>Date',j,H,X='<i class="fa-solid fa-layer-group mr-2"></i>Grams Harvested',L,I,g='<i class="fa-solid fa-pen-to-square mr-2"></i>Remarks',q,D,w,Z='<i class="fa-solid fa-plus"></i> <span>Add</span>',A,M,y,C=[],it=new Map,lt,z,ct,K,x,Tt,tt,N,O,kt,F,Ht,mt,Mt,wt;e=new ce({});let nt=bt(i[7]),$=[];for(let r=0;r<nt.length;r+=1)$[r]=It(Ot(i,nt,r));let pt=bt(i[4]);const Et=r=>r[18].id;for(let r=0;r<pt.length;r+=1){let _=Nt(i,pt,r),b=Et(_);it.set(b,C[r]=Ut(b,_))}const Lt=[Te,ye],W=[];function Dt(r,_){return r[0].allHarvest?0:1}N=Dt(i),O=W[N]=Lt[N](i);function Yt(r){i[13](r)}let Ct={showFirstLastButtons:!1,showPreviousNextButtons:!0};return i[1]!==void 0&&(Ct.settings=i[1]),F=new oe({props:Ct}),Wt.push(()=>ee(F,"settings",Yt)),{c(){ut(e.$$.fragment),t=R(),s=u("div"),a=u("div"),l=u("input"),E=R(),h=u("button"),h.innerHTML=T,f=R(),n=u("table"),p=u("thead"),m=u("tr"),P=u("th"),P.innerHTML=G,j=R(),H=u("th"),H.innerHTML=X,L=R(),I=u("th"),I.innerHTML=g,q=R(),D=u("th"),w=u("button"),w.innerHTML=Z,A=R(),M=u("tbody");for(let r=0;r<$.length;r+=1)$[r].c();y=R();for(let r=0;r<C.length;r+=1)C[r].c();lt=R(),z=u("tfoot"),ct=u("tr"),K=u("th"),x=u("h1"),Tt=st("Total Grams Harvested: "),tt=u("span"),O.c(),kt=R(),ut(F.$$.fragment),this.h()},l(r){dt(e.$$.fragment,r),t=B(r),s=d(r,"DIV",{class:!0});var _=k(s);a=d(_,"DIV",{class:!0});var b=k(a);l=d(b,"INPUT",{type:!0,placeholder:!0,class:!0}),E=B(b),h=d(b,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),at(h)!=="svelte-1dwgxnj"&&(h.innerHTML=T),b.forEach(c),f=B(_),n=d(_,"TABLE",{class:!0});var Q=k(n);p=d(Q,"THEAD",{});var S=k(p);m=d(S,"TR",{});var U=k(m);P=d(U,"TH",{"data-svelte-h":!0}),at(P)!=="svelte-1cyq8fs"&&(P.innerHTML=G),j=B(U),H=d(U,"TH",{"data-svelte-h":!0}),at(H)!=="svelte-1mvz4nf"&&(H.innerHTML=X),L=B(U),I=d(U,"TH",{"data-svelte-h":!0}),at(I)!=="svelte-srhm62"&&(I.innerHTML=g),q=B(U),D=d(U,"TH",{class:!0});var St=k(D);w=d(St,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),at(w)!=="svelte-1hksuxs"&&(w.innerHTML=Z),St.forEach(c),U.forEach(c),S.forEach(c),A=B(Q),M=d(Q,"TBODY",{});var vt=k(M);for(let et=0;et<$.length;et+=1)$[et].l(vt);y=B(vt);for(let et=0;et<C.length;et+=1)C[et].l(vt);vt.forEach(c),lt=B(Q),z=d(Q,"TFOOT",{});var Rt=k(z);ct=d(Rt,"TR",{});var Bt=k(ct);K=d(Bt,"TH",{colspan:!0});var gt=k(K);x=d(gt,"H1",{class:!0});var $t=k(x);Tt=rt($t,"Total Grams Harvested: "),tt=d($t,"SPAN",{class:!0});var Pt=k(tt);O.l(Pt),Pt.forEach(c),$t.forEach(c),kt=B(gt),dt(F.$$.fragment,gt),gt.forEach(c),Bt.forEach(c),Rt.forEach(c),Q.forEach(c),_.forEach(c),this.h()},h(){v(l,"type","text"),v(l,"placeholder","Search..."),v(l,"class","input mb-2 mr-2 sm:w-36 ml-auto h-8"),v(h,"type","button"),v(h,"class","btn btn-sm variant-filled-tertiary h-8 mb-2"),v(a,"class","flex items-center justify-center"),v(w,"type","button"),v(w,"class","btn btn-sm variant-filled-primary mr-2"),v(D,"class","flex items-center justify-center"),v(tt,"class","text-2xl"),v(x,"class","mb-2"),v(K,"colspan","3"),v(n,"class","table table-hover"),v(s,"class","mr-5 ml-5 mb-5")},m(r,_){_t(e,r,_),V(r,t,_),V(r,s,_),o(s,a),o(a,l),qt(l,i[3]),o(a,E),o(a,h),o(s,f),o(s,n),o(n,p),o(p,m),o(m,P),o(m,j),o(m,H),o(m,L),o(m,I),o(m,q),o(m,D),o(D,w),o(n,A),o(n,M);for(let b=0;b<$.length;b+=1)$[b]&&$[b].m(M,null);o(M,y);for(let b=0;b<C.length;b+=1)C[b]&&C[b].m(M,null);o(n,lt),o(n,z),o(z,ct),o(ct,K),o(K,x),o(x,Tt),o(x,tt),W[N].m(tt,null),o(K,kt),_t(F,K,null),mt=!0,Mt||(wt=[ot(l,"input",i[9]),ot(h,"click",i[6]),ot(w,"click",i[5])],Mt=!0)},p(r,_){if(_&8&&l.value!==r[3]&&qt(l,r[3]),_&128){nt=bt(r[7]);let S;for(S=0;S<nt.length;S+=1){const U=Ot(r,nt,S);$[S]?$[S].p(U,_):($[S]=It(U),$[S].c(),$[S].m(M,y))}for(;S<$.length;S+=1)$[S].d(1);$.length=nt.length}_&16&&(pt=bt(r[4]),C=ae(C,_,Et,1,r,pt,it,M,se,Ut,null,Nt));let b=N;N=Dt(r),N===b?W[N].p(r,_):(Ft(),Y(W[b],1,1,()=>{W[b]=null}),zt(),O=W[N],O?O.p(r,_):(O=W[N]=Lt[N](r),O.c()),J(O,1),O.m(tt,null));const Q={};!Ht&&_&2&&(Ht=!0,Q.settings=r[1],Xt(()=>Ht=!1)),F.$set(Q)},i(r){mt||(J(e.$$.fragment,r),J(O),J(F.$$.fragment,r),mt=!0)},o(r){Y(e.$$.fragment,r),Y(O),Y(F.$$.fragment,r),mt=!1},d(r){r&&(c(t),c(s)),ht(e,r),Zt($,r);for(let _=0;_<C.length;_+=1)C[_].d();W[N].d(),ht(F),Mt=!1,Vt(wt)}}}function be(i){let e,t,s;return t=new Qt({props:{value:void 0}}),{c(){e=u("div"),ut(t.$$.fragment),this.h()},l(a){e=d(a,"DIV",{class:!0});var l=k(e);dt(t.$$.fragment,l),l.forEach(c),this.h()},h(){v(e,"class","flex justify-center items-center h-fit")},m(a,l){V(a,e,l),_t(t,e,null),s=!0},p:ft,i(a){s||(J(t.$$.fragment,a),s=!0)},o(a){Y(t.$$.fragment,a),s=!1},d(a){a&&c(e),ht(t)}}}function It(i){let e=i[21].date+"",t;return{c(){t=st(e)},l(s){t=rt(s,e)},m(s,a){V(s,t,a)},p:ft,d(s){s&&c(t)}}}function Ut(i,e){let t,s,a=e[18].date_harvested+"",l,E,h,T=e[18].grams+"",f,n,p,m=Gt(e[18].remarks)+"",P,G,j,H,X='<i class="fa-solid fa-pen-to-square"></i> <span>Update</span> ',L,I='<i class="fa-solid fa-trash"></i> <span>Remove</span>',g,q,D;function w(){return e[10](e[18])}function Z(){return e[11](e[18])}function A(){return e[12](e[18])}return{key:i,first:null,c(){t=u("tr"),s=u("td"),l=st(a),E=R(),h=u("td"),f=st(T),n=R(),p=u("td"),P=st(m),G=R(),j=u("td"),H=u("button"),H.innerHTML=X,L=u("button"),L.innerHTML=I,g=R(),this.h()},l(M){t=d(M,"TR",{class:!0});var y=k(t);s=d(y,"TD",{});var C=k(s);l=rt(C,a),C.forEach(c),E=B(y),h=d(y,"TD",{});var it=k(h);f=rt(it,T),it.forEach(c),n=B(y),p=d(y,"TD",{});var lt=k(p);P=rt(lt,m),lt.forEach(c),G=B(y),j=d(y,"TD",{class:!0});var z=k(j);H=d(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),at(H)!=="svelte-1tfht23"&&(H.innerHTML=X),L=d(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),at(L)!=="svelte-itiafl"&&(L.innerHTML=I),z.forEach(c),g=B(y),y.forEach(c),this.h()},h(){v(H,"type","button"),v(H,"class","btn btn-sm variant-filled-tertiary mr-2"),v(L,"type","button"),v(L,"class","btn btn-sm variant-filled-error"),v(j,"class","flex items-center justify-center"),v(t,"class",""),this.first=t},m(M,y){V(M,t,y),o(t,s),o(s,l),o(t,E),o(t,h),o(h,f),o(t,n),o(t,p),o(p,P),o(t,G),o(t,j),o(j,H),o(j,L),o(t,g),q||(D=[ot(H,"click",At(w)),ot(L,"click",At(Z)),ot(t,"click",A)],q=!0)},p(M,y){e=M,y&16&&a!==(a=e[18].date_harvested+"")&&yt(l,a),y&16&&T!==(T=e[18].grams+"")&&yt(f,T),y&16&&m!==(m=Gt(e[18].remarks)+"")&&yt(P,m)},d(M){M&&c(t),q=!1,Vt(D)}}}function ye(i){let e,t,s;return t=new Qt({props:{width:"w-10",value:void 0}}),{c(){e=u("div"),ut(t.$$.fragment),this.h()},l(a){e=d(a,"DIV",{class:!0});var l=k(e);dt(t.$$.fragment,l),l.forEach(c),this.h()},h(){v(e,"class","flex justify-center items-center")},m(a,l){V(a,e,l),_t(t,e,null),s=!0},p:ft,i(a){s||(J(t.$$.fragment,a),s=!0)},o(a){Y(t.$$.fragment,a),s=!1},d(a){a&&c(e),ht(t)}}}function Te(i){let e=i[0].allHarvest+"",t,s;return{c(){t=st(e),s=st(" grams")},l(a){t=rt(a,e),s=rt(a," grams")},m(a,l){V(a,t,l),V(a,s,l)},p(a,l){l&1&&e!==(e=a[0].allHarvest+"")&&yt(t,e)},i:ft,o:ft,d(a){a&&(c(t),c(s))}}}function ke(i){let e,t,s,a,l,E;e=new ie({props:{transitionIn:re,transitionInParams:{duration:200}}});const h=[be,ge],T=[];function f(n,p){return n[2]?0:1}return s=f(i),a=T[s]=h[s](i),{c(){ut(e.$$.fragment),t=R(),a.c(),l=jt()},l(n){dt(e.$$.fragment,n),t=B(n),a.l(n),l=jt()},m(n,p){_t(e,n,p),V(n,t,p),T[s].m(n,p),V(n,l,p),E=!0},p(n,[p]){let m=s;s=f(n),s===m?T[s].p(n,p):(Ft(),Y(T[m],1,1,()=>{T[m]=null}),zt(),a=T[s],a?a.p(n,p):(a=T[s]=h[s](n),a.c()),J(a,1),a.m(l.parentNode,l))},i(n){E||(J(e.$$.fragment,n),J(a),E=!0)},o(n){Y(e.$$.fragment,n),Y(a),E=!1},d(n){n&&(c(t),c(l)),ht(e,n),T[s].d(n)}}}function Gt(i,e=22){return i.length>e?`${i.slice(0,e)}...`:i}function He(i,e,t){let s,{data:a}=e,l=[],E=!0,h="";async function T(){await ve()}Kt(async()=>{const g=ue(de,"user","123456"),q=_e(g,"harvest record"),D=he(q,me("date_harvested","asc"));pe(D,w=>{t(8,l=[]),w.forEach(Z=>{const A=Z.data();A.date_harvested&&A.date_harvested.toDate&&(A.date_harvested=ne(A.date_harvested.toDate(),"MMMM dd, yyyy")),A.id=Z.id,l.push(A)}),T(),t(2,E=!1)})});let f={page:0,limit:5,size:l.length,amounts:[1,2,5,10]};const n=le();function p(){const q={type:"component",component:{ref:fe},title:"",body:"",response:D=>console.log("response:",D)};n.trigger(q)}function m(g){return h.toLowerCase().split(" ").every(D=>Object.values(g).some(w=>typeof w=="string"&&w.toLowerCase().includes(D)))}function P(){t(4,s=l.filter(g=>m(g)).slice(f.page*f.limit,f.page*f.limit+f.limit))}let G=[];G.push(a.allDailyAve),console.log(G);function j(){h=this.value,t(3,h)}const H=g=>{},X=g=>{},L=g=>void 0;function I(g){f=g,t(1,f),t(8,l)}return i.$$set=g=>{"data"in g&&t(0,a=g.data)},i.$$.update=()=>{i.$$.dirty&256&&t(1,f.size=l.length,f),i.$$.dirty&258&&t(4,s=l.slice(f.page*f.limit,f.page*f.limit+f.limit))},[a,f,E,h,s,p,P,G,l,j,H,X,L,I]}class je extends xt{constructor(e){super(),te(this,e,He,ke,Jt,{data:0})}}export{je as component};
