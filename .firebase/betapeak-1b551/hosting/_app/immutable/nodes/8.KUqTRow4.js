import{s as $t,l as bt,i as z,n as Tt,f as h,k as jt,e as d,a as E,t as X,c as f,b as M,p as Q,g as C,d as G,q as n,h as l,r as tt,u as J,z as zt,A as Lt,j as ut,x as Pt,o as Ft}from"../chunks/scheduler.QbWIzjUv.js";import{S as At,i as xt,c as Mt,a as Et,m as Ct,b as ft,e as Kt,t as ht,d as It,g as Qt}from"../chunks/index.COTcGcuD.js";import{e as Vt,u as Xt,d as Gt}from"../chunks/each.DrhyqX_I.js";import{g as Ot,a as kt,f as Jt,e as Wt,P as Yt}from"../chunks/index.DTi6dYAV.js";import{g as qt}from"../chunks/stores.GkbJHTyM.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BEtOAtSO.js";import{M as Zt}from"../chunks/Modal.BaEBjw_v.js";import{T as te}from"../chunks/Toast.CyJWZj9n.js";import{s as ee,a as ae}from"../chunks/toast.D8XhVVf2.js";import{T as se,c as Dt,a as Ut,e as le,d as re,q as oe,o as ne,b as ie}from"../chunks/firebase.CXGZVSlo.js";import{p as ce,a as ue}from"../chunks/index.lAUe4eEb.js";function Bt(o){let t,a,e,s=`<i class="fa-solid fa-plus mr-2"></i>
				Add Fruiting Bags`,_,m,k,y,p,i='<i class="fa-solid fa-calendar"></i>',T,b,D,w,c,I='<i class="fa-solid fa-seedling"></i>',V,v,N,r,u,B='<i class="fa-solid fa-note-sticky"></i>',A,S,O,et,x,R,at,F,W,q,$=o[0].buttonTextCancel+"",U,st,Y,K,ot,H=o[4]&&wt(o);return{c(){t=d("div"),a=d("header"),e=d("div"),e.innerHTML=s,_=E(),m=d("hr"),k=E(),y=d("div"),p=d("div"),p.innerHTML=i,T=E(),b=d("input"),D=E(),w=d("div"),c=d("div"),c.innerHTML=I,V=E(),v=d("input"),N=E(),r=d("div"),u=d("div"),u.innerHTML=B,A=E(),S=d("textarea"),O=E(),H&&H.c(),et=E(),x=d("footer"),R=d("button"),at=X("OK"),W=E(),q=d("button"),U=X($),this.h()},l(j){t=f(j,"DIV",{class:!0});var g=M(t);a=f(g,"HEADER",{class:!0});var lt=M(a);e=f(lt,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1101ief"&&(e.innerHTML=s),lt.forEach(h),_=C(g),m=f(g,"HR",{class:!0}),k=C(g),y=f(g,"DIV",{class:!0});var Z=M(y);p=f(Z,"DIV",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-egrtet"&&(p.innerHTML=i),T=C(Z),b=f(Z,"INPUT",{type:!0,placeholder:!0}),Z.forEach(h),D=C(g),w=f(g,"DIV",{class:!0});var rt=M(w);c=f(rt,"DIV",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-17qp2kq"&&(c.innerHTML=I),V=C(rt),v=f(rt,"INPUT",{type:!0,placeholder:!0}),rt.forEach(h),N=C(g),r=f(g,"DIV",{class:!0});var nt=M(r);u=f(nt,"DIV",{class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-a1zxkn"&&(u.innerHTML=B),A=C(nt),S=f(nt,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),M(S).forEach(h),nt.forEach(h),O=C(g),H&&H.l(g),et=C(g),x=f(g,"FOOTER",{class:!0});var L=M(x);R=f(L,"BUTTON",{class:!0});var P=M(R);at=G(P,"OK"),P.forEach(h),W=C(L),q=f(L,"BUTTON",{class:!0});var dt=M(q);U=G(dt,$),dt.forEach(h),L.forEach(h),g.forEach(h),this.h()},h(){n(e,"class","flex items-center justify-center"),n(a,"class",he),n(m,"class","opacity-50"),n(p,"class","input-group-shim"),n(b,"type","date"),n(b,"placeholder","Date"),n(y,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),n(c,"class","input-group-shim"),n(v,"type","number"),n(v,"placeholder","Number of Bags"),n(w,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),n(u,"class","input-group-shim"),n(S,"class","textarea"),n(S,"rows","3"),n(S,"placeholder","Batch Remarks"),n(r,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),n(R,"class",F="btn "+o[0].buttonPositive),R.disabled=pe,n(q,"class",st="btn "+o[0].buttonNeutral),n(x,"class",Y="modal-footer "+o[0].regionFooter),n(t,"class","modal-example-form "+fe)},m(j,g){z(j,t,g),l(t,a),l(a,e),l(t,_),l(t,m),l(t,k),l(t,y),l(y,p),l(y,T),l(y,b),tt(b,o[1]),l(t,D),l(t,w),l(w,c),l(w,V),l(w,v),tt(v,o[2]),l(t,N),l(t,r),l(r,u),l(r,A),l(r,S),tt(S,o[3]),l(t,O),H&&H.m(t,null),l(t,et),l(t,x),l(x,R),l(R,at),l(x,W),l(x,q),l(q,U),K||(ot=[J(b,"input",o[8]),J(v,"input",o[9]),J(S,"input",o[10]),J(R,"click",o[7]),J(q,"click",function(){zt(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],K=!0)},p(j,g){o=j,g&2&&tt(b,o[1]),g&4&&Lt(v.value)!==o[2]&&tt(v,o[2]),g&8&&tt(S,o[3]),o[4]?H?H.p(o,g):(H=wt(o),H.c(),H.m(t,et)):H&&(H.d(1),H=null),g&1&&F!==(F="btn "+o[0].buttonPositive)&&n(R,"class",F),g&1&&$!==($=o[0].buttonTextCancel+"")&&ut(U,$),g&1&&st!==(st="btn "+o[0].buttonNeutral)&&n(q,"class",st),g&1&&Y!==(Y="modal-footer "+o[0].regionFooter)&&n(x,"class",Y)},d(j){j&&h(t),H&&H.d(),K=!1,Pt(ot)}}}function wt(o){let t,a;return{c(){t=d("p"),a=X(o[4]),this.h()},l(e){t=f(e,"P",{class:!0});var s=M(t);a=G(s,o[4]),s.forEach(h),this.h()},h(){n(t,"class","text-red-500")},m(e,s){z(e,t,s),l(t,a)},p(e,s){s&16&&ut(a,e[4])},d(e){e&&h(t)}}}function de(o){let t,a=o[5][0]&&Bt(o);return{c(){a&&a.c(),t=bt()},l(e){a&&a.l(e),t=bt()},m(e,s){a&&a.m(e,s),z(e,t,s)},p(e,[s]){e[5][0]?a?a.p(e,s):(a=Bt(e),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i:Tt,o:Tt,d(e){e&&h(t),a&&a.d(e)}}}const fe="card p-4 w-modal shadow-xl space-y-4 ",he="text-2xl font-bold";let pe=!1;function _e(o,t,a){let e,{parent:s}=t;const _=Ot();jt(o,_,v=>a(5,e=v));const m=qt();function k(){ee(m,"Bag Recorded Successfully")}function y(){ae(m,"Failed to Record Bags")}let p,i,T="",b="";function D(v){const N=kt(v,"dd"),r=kt(v,"MMM").toUpperCase();return`#OM${N}${r}`}async function w(){if(!p||!i){a(4,b="Date and grams are required.");return}const v=ce(p,"yyyy-MM-dd",new Date),N=D(v),r=new Date,u=ue(v,r.getHours()*60+r.getMinutes()),B={batch_code:N,batch_planted:se.fromDate(u),batch_total_bags:i,batch_remarks:T,batch_total_removed:0},A=Dt(Ut,"user","123456","batch");try{const S=await le(A,B),O=Dt(S,"batch_harvest");k(),_.close()}catch{y()}}function c(){p=this.value,a(1,p)}function I(){i=Lt(this.value),a(2,i)}function V(){T=this.value,a(3,T)}return o.$$set=v=>{"parent"in v&&a(0,s=v.parent)},[s,p,i,T,b,e,_,w,c,I,V]}class me extends At{constructor(t){super(),xt(this,t,_e,de,$t,{parent:0})}}function Nt(o,t,a){const e=o.slice();return e[21]=t[a],e}function ve(o){let t,a,e,s,_,m,k='<span class="material-symbols-outlined">search</span> <span>Search</span>',y,p,i='<span class="material-symbols-outlined">add_circle</span> <span>Add</span>',T,b,D=[],w=new Map,c,I,V;t=new te({});let v=Vt(o[0]);const N=r=>r[21].id;for(let r=0;r<v.length;r+=1){let u=Nt(o,v,r),B=N(u);w.set(B,D[r]=Rt(B,u))}return{c(){Mt(t.$$.fragment),a=E(),e=d("div"),s=d("input"),_=E(),m=d("button"),m.innerHTML=k,y=E(),p=d("button"),p.innerHTML=i,T=E(),b=d("div");for(let r=0;r<D.length;r+=1)D[r].c();this.h()},l(r){Et(t.$$.fragment,r),a=C(r),e=f(r,"DIV",{class:!0});var u=M(e);s=f(u,"INPUT",{type:!0,placeholder:!0,class:!0}),_=C(u),m=f(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-163keup"&&(m.innerHTML=k),y=C(u),p=f(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-655yag"&&(p.innerHTML=i),u.forEach(h),T=C(r),b=f(r,"DIV",{class:!0});var B=M(b);for(let A=0;A<D.length;A+=1)D[A].l(B);B.forEach(h),this.h()},h(){n(s,"type","text"),n(s,"placeholder","Search..."),n(s,"class","input mb-2 mr-2 sm:w-36 ml-auto h-8"),n(m,"type","button"),n(m,"class","btn btn-sm variant-filled-tertiary h-8 ml-2 mb-2"),n(p,"type","button"),n(p,"class","btn btn-sm variant-filled-primary ml-2 mb-2"),n(e,"class","mr-5 mt-5 flex items-center justify-center"),n(b,"class","w-full text-token grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pl-4 pr-4")},m(r,u){Ct(t,r,u),z(r,a,u),z(r,e,u),l(e,s),tt(s,o[2]),l(e,_),l(e,m),l(e,y),l(e,p),z(r,T,u),z(r,b,u);for(let B=0;B<D.length;B+=1)D[B]&&D[B].m(b,null);c=!0,I||(V=[J(s,"input",o[7]),J(m,"click",o[5]),J(p,"click",o[4])],I=!0)},p(r,u){u&4&&s.value!==r[2]&&tt(s,r[2]),u&9&&(v=Vt(r[0]),D=Xt(D,u,N,1,r,v,w,b,Gt,Rt,null,Nt))},i(r){c||(ht(t.$$.fragment,r),c=!0)},o(r){ft(t.$$.fragment,r),c=!1},d(r){r&&(h(a),h(e),h(T),h(b)),It(t,r);for(let u=0;u<D.length;u+=1)D[u].d();I=!1,Pt(V)}}}function be(o){let t,a,e;return a=new Yt({props:{value:void 0}}),{c(){t=d("div"),Mt(a.$$.fragment),this.h()},l(s){t=f(s,"DIV",{class:!0});var _=M(t);Et(a.$$.fragment,_),_.forEach(h),this.h()},h(){n(t,"class","flex justify-center items-center h-fit")},m(s,_){z(s,t,_),Ct(a,t,null),e=!0},p:Tt,i(s){e||(ht(a.$$.fragment,s),e=!0)},o(s){ft(a.$$.fragment,s),e=!1},d(s){s&&h(t),It(a)}}}function Rt(o,t){let a,e,s,_,m,k="qr_code",y,p,i=t[21].batch_code+"",T,b,D,w,c,I,V,v="calendar_month",N,r,u=t[21].batch_planted+"",B,A,S,O,et="potted_plant",x,R,at,F=t[21].batch_total_bags+"",W,q,$,U,st="delete_forever",Y,K,ot,H=t[21].batch_total_removed+"",j,g,lt,Z,rt;function nt(){return t[8](t[21])}return{key:o,first:null,c(){a=d("a"),e=d("div"),s=d("div"),_=d("div"),m=d("span"),m.textContent=k,y=E(),p=d("h2"),T=X(i),b=E(),D=d("hr"),w=E(),c=d("div"),I=d("div"),V=d("span"),V.textContent=v,N=E(),r=d("h1"),B=X(u),A=E(),S=d("div"),O=d("span"),O.textContent=et,x=E(),R=d("h1"),at=X("Total Bags: "),W=X(F),q=E(),$=d("div"),U=d("span"),U.textContent=st,Y=E(),K=d("h1"),ot=X("Total Bags Removed: "),j=X(H),lt=E(),this.h()},l(L){a=f(L,"A",{href:!0});var P=M(a);e=f(P,"DIV",{class:!0});var dt=M(e);s=f(dt,"DIV",{class:!0});var it=M(s);_=f(it,"DIV",{class:!0});var pt=M(_);m=f(pt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-1hj0gxq"&&(m.textContent=k),y=C(pt),p=f(pt,"H2",{class:!0});var St=M(p);T=G(St,i),St.forEach(h),pt.forEach(h),b=C(it),D=f(it,"HR",{class:!0}),w=C(it),c=f(it,"DIV",{class:!0});var ct=M(c);I=f(ct,"DIV",{class:!0});var _t=M(I);V=f(_t,"SPAN",{class:!0,"data-svelte-h":!0}),Q(V)!=="svelte-6zyxns"&&(V.textContent=v),N=C(_t),r=f(_t,"H1",{});var Ht=M(r);B=G(Ht,u),Ht.forEach(h),_t.forEach(h),A=C(ct),S=f(ct,"DIV",{class:!0});var mt=M(S);O=f(mt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(O)!=="svelte-12ip125"&&(O.textContent=et),x=C(mt),R=f(mt,"H1",{});var gt=M(R);at=G(gt,"Total Bags: "),W=G(gt,F),gt.forEach(h),mt.forEach(h),q=C(ct),$=f(ct,"DIV",{class:!0});var vt=M($);U=f(vt,"SPAN",{class:!0,"data-svelte-h":!0}),Q(U)!=="svelte-w69mek"&&(U.textContent=st),Y=C(vt),K=f(vt,"H1",{});var yt=M(K);ot=G(yt,"Total Bags Removed: "),j=G(yt,H),yt.forEach(h),vt.forEach(h),ct.forEach(h),it.forEach(h),dt.forEach(h),P.forEach(h),lt=C(L),this.h()},h(){n(m,"class","text-2xl material-symbols-outlined m-2"),n(p,"class",ke),n(_,"class","flex items-center"),n(D,"class","opacity-50"),n(V,"class","material-symbols-outlined mr-2"),n(I,"class","flex items-center"),n(O,"class","material-symbols-outlined mr-2"),n(S,"class","flex items-center"),n(U,"class","material-symbols-outlined mr-2"),n($,"class","flex items-center"),n(c,"class",De),n(s,"class",Te),n(e,"class",ye),n(a,"href",g="/records/batch/"+t[21].id),this.first=a},m(L,P){z(L,a,P),l(a,e),l(e,s),l(s,_),l(_,m),l(_,y),l(_,p),l(p,T),l(s,b),l(s,D),l(s,w),l(s,c),l(c,I),l(I,V),l(I,N),l(I,r),l(r,B),l(c,A),l(c,S),l(S,O),l(S,x),l(S,R),l(R,at),l(R,W),l(c,q),l(c,$),l($,U),l($,Y),l($,K),l(K,ot),l(K,j),z(L,lt,P),Z||(rt=J(a,"click",nt),Z=!0)},p(L,P){t=L,P&1&&i!==(i=t[21].batch_code+"")&&ut(T,i),P&1&&u!==(u=t[21].batch_planted+"")&&ut(B,u),P&1&&F!==(F=t[21].batch_total_bags+"")&&ut(W,F),P&1&&H!==(H=t[21].batch_total_removed+"")&&ut(j,H),P&1&&g!==(g="/records/batch/"+t[21].id)&&n(a,"href",g)},d(L){L&&(h(a),h(lt)),Z=!1,rt()}}}function ge(o){let t,a,e,s,_,m;t=new Zt({props:{transitionIn:Jt,transitionInParams:{duration:200}}});const k=[be,ve],y=[];function p(i,T){return i[1]?0:1}return e=p(o),s=y[e]=k[e](o),{c(){Mt(t.$$.fragment),a=E(),s.c(),_=bt()},l(i){Et(t.$$.fragment,i),a=C(i),s.l(i),_=bt()},m(i,T){Ct(t,i,T),z(i,a,T),y[e].m(i,T),z(i,_,T),m=!0},p(i,[T]){let b=e;e=p(i),e===b?y[e].p(i,T):(Qt(),ft(y[b],1,1,()=>{y[b]=null}),Kt(),s=y[e],s?s.p(i,T):(s=y[e]=k[e](i),s.c()),ht(s,1),s.m(_.parentNode,_))},i(i){m||(ht(t.$$.fragment,i),ht(s),m=!0)},o(i){ft(t.$$.fragment,i),ft(s),m=!1},d(i){i&&(h(a),h(_)),It(t,i),y[e].d(i)}}}const ye="card card-hover overflow-hidden ",Te=" p-4 space-y-6 ",ke="text-lg md:text-2xl lg:text-1xl",De="text-xs md:text-sm lg:text-md ";function Me(o,t,a){let e=[],s=[],_=!0,m="";qt(),Ft(async()=>{const c=re(Ut,"user","123456"),I=Dt(c,"batch"),V=oe(I,ne("batch_planted","asc"));ie(V,v=>{a(0,s=[]),v.forEach(N=>{const r=N.data();r.batch_planted&&r.batch_planted.toDate&&(r.batch_planted=kt(r.batch_planted.toDate(),"MMMM dd, yyyy")),r.id=N.id,s.push(r),a(1,_=!1)})})});let k={page:0,limit:5,size:e.length,amounts:[1,2,5,10]};const y=Ot();function p(c){Wt.set({id:c.id,batch_code:c.batch_code,batch_total_removed:c.batch_total_removed,batch_total_bags:c.batch_total_bags,batch_planted:c.batch_planted,batch_remarks:c.batch_remarks})}function i(){const I={type:"component",component:{ref:me},title:"",body:""};y.trigger(I)}function T(c){return m.toLowerCase().split(" ").every(V=>Object.values(c).some(v=>typeof v=="string"&&v.toLowerCase().includes(V)))}function b(){e.filter(c=>T(c)).slice(k.page*k.limit,k.page*k.limit+k.limit)}function D(){m=this.value,a(2,m)}const w=c=>p(c);return o.$$.update=()=>{o.$$.dirty&64&&e.slice(k.page*k.limit,k.page*k.limit+k.limit)},a(6,k.size=e.length,k),[s,_,m,p,i,b,k,D,w]}class Le extends At{constructor(t){super(),xt(this,t,Me,ge,$t,{})}}export{Le as component};
